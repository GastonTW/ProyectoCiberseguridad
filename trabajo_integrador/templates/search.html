{% extends 'base.html' %}

{% block title %}Buscador de Brainrot{% endblock %}

{% block content %}
<h1>Buscador de Brainrot</h1>

<form method="get" action="{{ url_for('brainrot_search') }}">
  <div class="input-group mb-3">
    <input type="text" class="form-control" name="nombre" value="{{ request.args.get('nombre','') }}" placeholder="Buscar...">
    <button class="btn btn-primary" type="submit">Buscar</button>
  </div>
</form>
<!-- Mostrar id, nombre, imagen -->
{% set nombre = request.args.get('nombre','').strip() %}
{% if nombre %}
  {% if rows %}
    <table class="table table-bordered">
      <thead>
        <!-- y la columna "role" para que sirve??? -->
        <tr><th>Id</th><th>Nombre</th><th>Imagen</th></tr>
      </thead>
      <tbody>
        {% for row in rows %}
          <tr>
            <td>{{ row['id'] }}</td>
            <td>{{ row['nombre'] }}</td>
            <td>
              <img src="{{ url_for('static', filename='brainrots/' ~ row['imagen']) }}"
                   alt="{{ row['imagen'] }}"
                   class="img-fluid"
                   style="max-height: 100px;">
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="alert alert-warning">No se encontraron brainrots con "{{ nombre }}".</div>
  {% endif %}
{% else %}
  <div class="alert alert-info">Ingresá un término para buscar brainrots.</div>
{% endif %}
{% endblock %}
